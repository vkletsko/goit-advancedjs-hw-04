{"version":3,"file":"commonHelpers.js","sources":["../src/js/images-api/config.js","../src/js/helpers/toasts.js","../src/js/images-api/pixabay-service.js","../../../../../../sprite.svg","../src/js/helpers/createImagesmarkup.js","../src/js/helpers/cardsSmoothScroll.js","../src/js/index.js"],"sourcesContent":["export const BASE_URL = 'https://pixabay.com/api/';\nexport const API_KEY = '44422939-551080d7da5d848bff65502fd';\nexport const PER_PAGE = 40;\n","import { Toast } from 'bootstrap';\n\nexport const showToast = ({ message, customClass }) => {\n  const toastContainer = document.getElementById('toastContainer');\n\n  const toastEl = document.createElement('div');\n  toastEl.classList.add('toast', 'align-items-center', customClass);\n  toastEl.setAttribute('role', 'alert');\n  toastEl.setAttribute('aria-live', 'assertive');\n  toastEl.setAttribute('aria-atomic', 'true');\n\n  // Контент Toast\n  toastEl.innerHTML = `\n      <div class=\"d-flex\">\n        <div class=\"toast-body text-white\">\n            ${message}\n        </div>\n        <button type=\"button\" class=\"btn-close btn-close-white me-2 m-auto\" data-bs-dismiss=\"toast\" aria-label=\"Close\"></button>\n      </div>\n  `;\n\n  toastContainer.appendChild(toastEl);\n\n  const toast = new Toast(toastEl, {\n    delay: 2000,\n  });\n  toast.show();\n};\n","import { BASE_URL, API_KEY, PER_PAGE } from './config.js';\nimport { showToast } from '../helpers/toasts.js';\nimport axios from 'axios';\n\naxios.defaults.baseURL = BASE_URL;\n\nconst paramsObj = {\n  key: API_KEY,\n  per_page: PER_PAGE,\n  safesearch: true,\n  image_type: 'photo',\n  orientation: 'horizontal',\n};\n\nexport const fetchImages = async ({ searchQuery, currentPage: page } = {}) => {\n  const response = await axios({\n    params: { ...paramsObj, q: searchQuery, page },\n  });\n  const { data, status } = response;\n  const totalPages = Math.ceil(data.total / PER_PAGE);\n  const isEndOfCollection = page >= totalPages || totalPages === 1;\n  if (status !== 200) {\n    showToast({\n      message: 'Sorry, something went wrong on server.',\n      customClass: 'bg-danger',\n    });\n    return {\n      hits: data.hits,\n      isEndOfCollection,\n    };\n  }\n  if (!data.total) {\n    showToast({\n      message:\n        'Sorry, there are no images matching your search query. Please try again.',\n      customClass: 'bg-info',\n    });\n    return {\n      hits: data.hits,\n      isEndOfCollection,\n    };\n  }\n\n  if (page < 2) {\n    showToast({\n      message: `Hooray! We found ${data.totalHits} images.`,\n      customClass: 'bg-success',\n    });\n  }\n\n  if (isEndOfCollection) {\n    showToast({ message: 'End of collection.', customClass: 'bg-warning' });\n    return {\n      hits: data.hits,\n      isEndOfCollection,\n    };\n  }\n\n  return {\n    hits: data.hits,\n    isEndOfCollection,\n  };\n};\n","export default \"__VITE_PUBLIC_ASSET__f003ec3c__\"","import icons from '/sprite.svg';\n\nexport const createImagesMarkup = data => {\n  return data.reduce((markup, hit) => {\n    const {\n      webformatURL,\n      webformatWidth,\n      webformatHeight,\n      largeImageURL,\n      tags,\n      likes,\n      views,\n      comments,\n      downloads,\n    } = hit;\n    return (markup += `<a\n          class=\"info-card d-flex flex-column text-decoration-none\"\n          href=\"${largeImageURL}\"\n        >\n          <div class=\"rounded overflow-hidden flex-grow-1 shadow\">\n            <img\n              class=\"info-ill\"\n              src=\"${webformatURL}\"\n              alt=\"${tags}\"\n              width=\"${webformatWidth}\"\n              heigth=\"${webformatHeight}\"\n            />\n          </div>\n          <div class=\"info-list d-grid text-center\">\n            <button\n              class=\"btn btn-secondary\"\n              type=\"button\"\n              data-bs-toggle=\"tooltip\"\n              data-bs-placement=\"top\"\n              data-bs-custom-class=\"custom-tooltip\"\n              data-bs-title=\"Likes: ${likes}\"\n            >\n              <svg class=\"info-icon\" aria-hidden=\"true\" width=\"20\" height=\"20\">\n                <use href=\"${icons}#likes\"></use>\n              </svg>\n            </button>\n            <button\n              class=\"btn btn-secondary\"\n              type=\"button\"\n              data-bs-toggle=\"tooltip\"\n              data-bs-placement=\"top\"\n              data-bs-custom-class=\"custom-tooltip\"\n              data-bs-title=\"Views: ${views}\"\n            >\n              <svg class=\"info-icon\" aria-hidden=\"true\" width=\"20\" height=\"20\">\n                <use href=\"${icons}#views\"></use>\n              </svg>\n            </button>\n            <button\n              class=\"btn btn-secondary\"\n              type=\"button\"\n              data-bs-toggle=\"tooltip\"\n              data-bs-placement=\"top\"\n              data-bs-custom-class=\"custom-tooltip\"\n              data-bs-title=\"Comments: ${comments}\"\n            >\n              <svg class=\"info-icon\" aria-hidden=\"true\" width=\"20\" height=\"20\">\n                <use href=\"${icons}#comment\"></use>\n              </svg>\n            </button>\n            <button\n              class=\"btn btn-secondary\"\n              type=\"button\"\n              data-bs-toggle=\"tooltip\"\n              data-bs-placement=\"top\"\n              data-bs-custom-class=\"custom-tooltip\"\n              data-bs-title=\"Downloads: ${downloads}\"\n            >\n              <svg class=\"info-icon\" aria-hidden=\"true\" width=\"20\" height=\"20\">\n                <use href=\"${icons}#download\"></use>\n              </svg>\n            </button>\n          </div>\n        </a>`);\n  }, '');\n};\n","export const cardsSmoothScroll = (selector = '[data-gallery]') => {\n  if (!selector) return;\n\n  const { height: cardHeight } = document\n    .querySelector('[data-gallery]')\n    .firstElementChild.getBoundingClientRect();\n\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n};\n","import { fetchImages } from './images-api/pixabay-service.js';\nimport { createImagesMarkup } from './helpers/createImagesmarkup.js';\nimport { cardsSmoothScroll } from './helpers/cardsSmoothScroll.js';\n\nimport SimpleLightbox from 'simplelightbox';\nimport { Tooltip } from 'bootstrap';\n\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport 'bootstrap/scss/bootstrap.scss';\nimport '../css/hw-04.scss';\n\n// Refereences to DOM-elements\nconst refs = {\n  searchForm: document.forms.searchForm,\n  container: document.querySelector('[data-gallery]'),\n  loadMoreBtn: document.querySelector('[data-load-more]'),\n};\n// Query params for request to pixabay\nconst queryParams = {\n  currentPage: 1,\n  searchQuery: '',\n};\n// Lightbox modal\nconst lightbox = new SimpleLightbox('[data-gallery] a');\n// Bootstrap tooltips for image inforamtion\nconst initTooltip = selector => {\n  const tooltipTriggerList = document.querySelectorAll(selector);\n  [...tooltipTriggerList].map(\n    tooltipTriggerEl => new Tooltip(tooltipTriggerEl)\n  );\n};\n// Handlers\nconst onSearchFormSubmit = async event => {\n  event.preventDefault();\n  const form = event.currentTarget;\n  queryParams.searchQuery = form.elements.searchInput.value.trim();\n  queryParams.currentPage = 1;\n  try {\n    refs.container.innerHTML = '';\n    refs.loadMoreBtn.classList.add('d-none');\n    const { hits, isEndOfCollection } = await fetchImages(queryParams);\n    refs.container.insertAdjacentHTML('beforeend', createImagesMarkup(hits));\n    lightbox.refresh();\n    initTooltip('[data-bs-toggle=\"tooltip\"]');\n\n    if (isEndOfCollection) return;\n    refs.loadMoreBtn.classList.remove('d-none');\n  } catch (error) {\n    console.log(error);\n  } finally {\n    form.reset();\n  }\n};\n\nconst onLoadMoreBtnClick = async event => {\n  try {\n    queryParams.currentPage += 1;\n    const { hits, isEndOfCollection } = await fetchImages(queryParams);\n    refs.container.insertAdjacentHTML('beforeend', createImagesMarkup(hits));\n    lightbox.refresh();\n    initTooltip('[data-bs-toggle=\"tooltip\"]');\n    cardsSmoothScroll('[data-gallery]');\n    if (isEndOfCollection) {\n      refs.loadMoreBtn.classList.add('d-none');\n    }\n  } catch (error) {\n    console.log(error);\n  }\n};\n\nrefs.searchForm.addEventListener('submit', onSearchFormSubmit);\nrefs.loadMoreBtn.addEventListener('click', onLoadMoreBtnClick);\n"],"names":["BASE_URL","API_KEY","PER_PAGE","showToast","message","customClass","toastContainer","toastEl","Toast","axios","paramsObj","fetchImages","searchQuery","page","response","data","status","totalPages","isEndOfCollection","icons","createImagesMarkup","markup","hit","webformatURL","webformatWidth","webformatHeight","largeImageURL","tags","likes","views","comments","downloads","cardsSmoothScroll","selector","cardHeight","refs","queryParams","lightbox","SimpleLightbox","initTooltip","tooltipTriggerEl","Tooltip","onSearchFormSubmit","event","form","hits","error","onLoadMoreBtnClick"],"mappings":"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"}